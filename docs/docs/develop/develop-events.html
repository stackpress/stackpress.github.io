<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Develop Events - Develop - Stackpress Documentation</title><meta name="description" content="An event emitter is a pattern for making different parts of a program talk to each other by sending and receiving messages."/><meta property="og:title" content="Develop Events - Develop - Stackpress Documentation"/><meta property="og:image" content="/images/icon.png"/><meta property="og:url" content="/docs/develop/develop-events"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Develop Events - Develop - Stackpress Documentation"/><meta name="twitter:image" content="/images/icon.png"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><link rel="stylesheet" type="text/css" href="/styles/global.css"/><link rel="stylesheet" type="text/css" href="/assets/develop-events-DZMgo4S8.css"/>
  </head>
  <body>
    <div id="root"><link rel="preload" as="image" href="/icon.png"/><div class="dark relative overflow-hidden px-w-100-0 px-h-100-0 theme-bg-bg0 theme-tx1"><header class="theme-bg-bg1 duration-200 absolute px-h-60 px-r-0 px-t-0 px-l-220 rmd-px-l-0"><div class="flex items-center px-px-20 px-h-100-0"><button class="theme-tx1 md-hidden b-0 p-0 bg-transparent text-xl"><i class="fas fa-bars"></i></button><div class="flex-grow"></div><button class="flex justify-center items-center b-0 px-mr-10 px-h-26 px-w-26 px-fs-18 rounded-full text-white bg-gray-600"><i class="fas fa-moon"></i></button></div></header><aside class="duration-200 flex flex-col px-h-100-0 px-z-100 absolute px-w-220 px-b-0 px-l-0 px-t-0 rmd-px-l--220"><header class="px-p-10 px-h-60 flex items-center theme-bg-bg0"><h3 class="flex-grow px-m-0"><a class="theme-tx1 flex items-center no-underline" href="/"><img src="/icon.png" class="px-w-40 px-h-40 px-mr-10"/><span class="uppercase px-fs-16">Stackpress</span></a></h3><button class="theme-tx1 md-hidden b-0 p-0 bg-transparent text-xl"><i class="fas fa-chevron-left"></i></button></header><main class="theme-bg-bg1 flex-grow overflow-auto px-pt-10 px-pb-40"><div><a class="theme-muted block px-py-10 px-pl-20" href="/docs/introduction">Introduction</a><a class="theme-muted block px-py-10 px-pl-20" href="/docs/getting-started">Getting Started</a><a class="theme-muted block px-py-10 px-pl-20" href="/docs/tutorial">Tutorial</a></div><div><a href="/docs/develop/configure-project" class="theme-tx1 theme-bg-bg2 theme-bc-bd1 font-semibold px-fs-16 uppercase px-mb-0 px-mt-0 px-py-12 px-px-20 flex items-center"><span class="flex-grow">Develop</span><i class="theme-muted px-fs-12 fas fa-caret-down"></i></a><a class="theme-muted block px-py-10 px-pl-40" href="/docs/develop/configure-project">Configure Project</a><a class="theme-muted block px-py-10 px-pl-40" href="/docs/develop/customize-bootstrap">Customize Bootstrap</a><a class="theme-muted block px-py-10 px-pl-40" href="/docs/develop/develop-routes">Develop Routes</a><a class="theme-tx1 block px-py-10 px-pl-40 font-bold" href="/docs/develop/develop-events">Develop Events</a></div><div><a href="/docs/transform/form-idea" class="theme-tx1 theme-bg-bg2 theme-bc-bd1 font-semibold px-fs-16 uppercase px-mb-0 px-mt-0 px-py-12 px-px-20 flex items-center"><span class="flex-grow">Transform</span><i class="theme-muted px-fs-12 fas fa-caret-left"></i></a></div><div><a href="/docs/toolkit/setup" class="theme-tx1 theme-bg-bg2 theme-bc-bd1 font-semibold px-fs-16 uppercase px-mb-0 px-mt-0 px-py-12 px-px-20 flex items-center"><span class="flex-grow">Toolkit</span><i class="theme-muted px-fs-12 fas fa-caret-left"></i></a></div><div><a href="/docs/references/client-api" class="theme-tx1 theme-bg-bg2 theme-bc-bd1 font-semibold px-fs-16 uppercase px-mb-0 px-mt-0 px-py-12 px-px-20 flex items-center"><span class="flex-grow">References</span><i class="theme-muted px-fs-12 fas fa-caret-left"></i></a></div></main></aside><aside class="duration-200 absolute px-w-220 px-b-0 px-t-0 px-t-60 px-z-100 px-r-0 rlg-hidden"><div class="px-h-100-0 theme-bg-bg3 flex flex-col"><menu class="px-m-0 px-px-10 px-py-20 px-h-100-40 overflow-auto"><h6 class="theme-muted px-fs-14 px-mb-0 px-mt-0 px-pb-10 uppercase">On this page</h6><nav class="px-fs-14 px-lh-32"><a class="theme-tx0 block" href="#with-server">With Server</a><a class="theme-tx0 block" href="#with-routing">With Routing</a><a class="theme-tx0 block" href="#event-names">Event Names</a><a class="theme-tx0 block" href="#event-priority">Event Priority</a><a class="theme-tx0 block" href="#event-actions">Event Actions</a></nav></menu></div></aside><main class="theme-bg-bg0 duration-200 absolute px-b-0 px-t-60 px-l-220 rmd-px-l-0 px-r-220 rlg-px-r-0"><article class="px-h-100-0 overflow-auto px-px-20 px-pb-20 px-fs-15"><h1 class="px-fs-24 font-bold px-pt-40 px-pb-20">EventEmitter Class</h1><div class="px-lh-30 px-py-20 block">An event emitter is a pattern for making different parts of a program talk to each other by sending and receiving messages. It&#x27;s a way to create responsive and interactive applications. The <a href="/docs/references/server-class" class="theme-info underline ">Server</a>, and <a href="/docs/references/router-class" class="theme-info underline ">Router</a> class extends from this class. The following code is an example of creating an emitter, a very basic listener and emitting the event.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">Where as <!-- --> is the name of the event and<!-- --> is the action function that will be executed when the event is emitted.</div><a id="with-server"></a><h2 class="px-fs-16 font-bold px-pt-40">With Server</h2><section><div class="px-lh-30 px-py-20 block">In relation to the server, you can listen to events in the following way.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The differences are the server will always pass a <a href="/docs/references/request-class" class="theme-info underline ">Request</a> <em class="font-italic">(req)</em>, <a href="/docs/references/response-class" class="theme-info underline ">Response</a> <em class="font-italic">(res)</em>, and <a href="/docs/references/server-class" class="theme-info underline ">Server</a> <em class="font-italic">(ctx)</em> object, respectively and events provides a good abstraction strategy for routes.</div></section><a id="with-routing"></a><h2 class="px-fs-16 font-bold px-pt-40">With Routing</h2><section><div class="px-lh-30 px-py-20 block">To explain the problem, consider the following route.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The example above describes a route with several steps involved and overtime can lead to issues. Setting up an event driven design where an events are designed as units of function could manage the technical debt later down the line. Consider the following usage of events with routing.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The example above shows how to create a home page route that emits several events. The <!-- --> event is used to log the view in the database and the <!-- --> event is used to send a response to the client. This way, you can separate the concerns of logging and responding from the route.</div></section><a id="event-names"></a><h2 class="px-fs-16 font-bold px-pt-40">Event Names</h2><section><div class="px-lh-30 px-py-20 block">A basic event name is just a string. The following code is a very basic example of an event that will listen to the <!-- --> event name as is.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">Event names can also be formed as patterns to represent dynamic variable pathing. The following code is an example of an event name with a named variable called <!-- -->.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The above example shows how the app listens to the <!-- --> event name. This means the following path examples are accepted.</div><ul class="px-lh-30 px-px-20"><li class="px-pb-20">• </li><li class="px-pb-20">• </li></ul><div class="px-lh-30 px-py-20 block">Where as <!-- --> would be <!-- -->, or <!-- -->. The <!-- --> parameter is a variable that can be extracted using the <!-- --> method. Another pattern called a wildcard <!-- --> can be used to match any single path segment.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The above code is an example of an event that listens to the <!-- --> event name. Unlike variable paths, the <!-- --> wildcard matches are nameless and thus denoted by numbers. This means the following event names examples will trigger.</div><ul class="px-lh-30 px-px-20"><li class="px-pb-20">• </li><li class="px-pb-20">• </li></ul><div class="px-lh-30 px-py-20 block">Where as <!-- --> would be <!-- -->, or <!-- -->. A more powerful pattern than the <!-- --> is the <!-- --> rest pattern that matches any number of path segments.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The above code is an example of a route path that listens to the <!-- --> path. In this example, any names that start with <!-- --> will be triggered. This means the following path examples are triggered <em class="font-italic">(but not limited to)</em>.</div><ul class="px-lh-30 px-px-20"><li class="px-pb-20">• </li><li class="px-pb-20">• </li></ul><div class="px-lh-30 px-py-20 block">Lastly an event name can also be a regular expression. The following code is an example of an event name that listens to the <!-- --> event expression.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div></section><a id="event-priority"></a><h2 class="px-fs-16 font-bold px-pt-40">Event Priority</h2><section><div class="px-lh-30 px-py-20 block">An event priority is a number that determines the order in which the event actions are executed. The higher the number, the higher the priority. The following code is an example of three events with different priorities.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The above code is an example of three events with different priorities. The first event has a priority of <!-- -->, the second event has a priority of <!-- -->, and the third event has a priority of <!-- -->. This means the first event will be executed first, followed by the second event, and finally the third event. The default priority is <!-- -->.</div></section><a id="event-actions"></a><h2 class="px-fs-16 font-bold px-pt-40">Event Actions</h2><section><div class="px-lh-30 px-py-20 block">An event action is a function that is executed when the route is matched. The following shows an example of a basic route action. When an event is emitted from the server the <!-- -->, <!-- --> and <!-- --> are the <a href="/docs/references/request-class" class="theme-info underline ">Request</a>, and <a href="/docs/references/response-class" class="theme-info underline ">Response</a>, and <a href="/docs/references/server-class" class="theme-info underline ">Server</a> objects, respectively.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The simplicity of the above code is what made this kind of pattern popular, but it comes with a few issues.</div><ul class="px-lh-30 px-px-20"><li class="px-pb-20">• The actions are defined, but not necessarily used. Consider a serverless environment.</li><li class="px-pb-20">• No event mapping for bundlers. Cannot do tree shaking or code splitting for example.</li><li class="px-pb-20">• Cannot be used effectively with a module loader. The action is not a module, and thus cannot be loaded.</li></ul><div class="frui-alert frui-curved frui-solid frui-thin frui-bd-info frui-tx-info px-lh-28"><i class="inline-block px-mr-5 fas fa-info-circle"></i><strong class="font-bold">NOTE:</strong> <!-- -->Basically the same issues as <a href="/docs/develop/develop-routes#route-actions" class="theme-info underline ">route actions</a>.</div><div class="px-lh-30 px-py-20 block">Because of the reasons above, the <!-- --> method can also accept a function that returns an import. The following code is an example of an event action that returns a module.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">The above code is an example of an event action that returns a module. The module is lazily loaded when the route is matched. Modules imported this way need to <!-- --> a function that accepts<!-- -->, <!-- --> and <!-- --> arguments.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="px-lh-30 px-py-20 block">An easier way to create an event action is to use the<!-- --> function like the following code.</div><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div></section><nav class="flex"><a class="theme-primary px-py-40" href="/docs/develop/develop-routes"><i class="fas fa-fw fa-chevron-left"></i>Develop Routes</a></nav></article></main></div><section class="Toastify" aria-live="polite" aria-atomic="false" aria-relevant="additions text" aria-label="Notifications Alt+T"></section></div>
    <script id="props" type="text/json">{"data":{"view":{"base":"/","props":{}},"brand":{"name":"Stackpress","logo":"/logo.png","icon":"/icon.png","favicon":"/favicon.ico"},"language":{"key":"locale","locale":"en_US","languages":{"en_US":{"label":"EN","translations":{"Sign In":"Signin","Home Page":"Home Page"}},"th_TH":{"label":"TH","translations":{"Sign In":"Signin","Home Page":"Home Pagesss"}}}}},"session":{"id":0,"roles":["GUEST"],"token":"","permits":[{"method":"ALL","route":"/**"}]},"request":{"url":{"hash":"","host":"www.stackpress.io","hostname":"www.stackpress.io","href":"https://www.stackpress.io/docs/develop/develop-events","origin":"https://www.stackpress.io","pathname":"/docs/develop/develop-events","port":"","protocol":"https:","search":""},"headers":{},"session":{},"method":"GET","mime":"text/plain","data":{"0":"develop","1":"develop-events"}},"response":{"code":200,"status":"OK","errors":{},"results":null,"total":0}}</script>
    <script type="module" src="/client/develop-events-27XlBcL9.js"></script>
  </body>
</html>