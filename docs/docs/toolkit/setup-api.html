<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Setup API - Stackpress Documentation</title><meta name="description" content="Stackpress API is a configuration that ultimately act as gateways to events. The API follows the 2-legged and 3-legged OAuth 2.0 specifications. "/><meta property="og:title" content="Setup API - Stackpress Documentation"/><meta property="og:image" content="/images/icon.png"/><meta property="og:url" content="/"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Setup API - Stackpress Documentation"/><meta name="twitter:image" content="/images/icon.png"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><link rel="stylesheet" type="text/css" href="/styles/global.css"/><link rel="stylesheet" type="text/css" href="/assets/setup-api-Ccr6eYWn.css"/>
  </head>
  <body>
    <div id="root"><link rel="preload" as="image" href="/icon.png"/><div class="light relative overflow-hidden px-w-100-0 px-h-100-0 theme-bg-bg0 theme-tx1"><header class="theme-bg-bg1 duration-200 absolute px-h-60 px-r-0 px-t-0 px-l-220 rmd-px-l-0"><div class="flex items-center px-px-20 px-h-100-0"><button class="theme-tx1 md-hidden b-0 p-0 bg-transparent text-xl"><i class="fas fa-bars"></i></button><div class="flex-grow"></div><button class="flex justify-center items-center b-0 px-mr-10 px-h-26 px-w-26 px-fs-18 rounded-full text-white bg-orange-600"><i class="fas fa-sun"></i></button></div></header><aside class="duration-200 flex flex-col px-h-100-0 px-z-100 absolute px-w-220 px-b-0 px-l-0 px-t-0 rmd-px-l--220"><header class="px-p-10 px-h-60 flex items-center theme-bg-bg0"><h3 class="flex-grow px-m-0"><a class="theme-tx1 flex items-center no-underline" href="/"><img src="/icon.png" class="px-w-40 px-h-40 px-mr-10"/><span class="uppercase px-fs-16">Stackpress</span></a></h3><button class="theme-tx1 md-hidden b-0 p-0 bg-transparent text-xl"><i class="fas fa-chevron-left"></i></button></header><main class="theme-bg-bg1 flex-grow overflow-auto px-pt-10 px-pb-40"><div><a class="theme-muted block px-py-10 px-pl-20" href="/docs/introduction">Introduction</a><a class="theme-muted block px-py-10 px-pl-20" href="/docs/getting-started">Getting Started</a><a class="theme-muted block px-py-10 px-pl-20" href="/docs/tutorial">Tutorial</a></div><div><a href="/docs/toolkit/setup" class="theme-tx1 theme-bg-bg2 theme-bc-bd1 font-semibold px-fs-16 uppercase px-mb-0 px-mt-0 px-py-12 px-px-20 flex items-center"><span class="flex-grow">Toolkit</span><i class="theme-muted px-fs-12 fas fa-caret-left"></i></a></div><div><a href="/docs/references/client-api" class="theme-tx1 theme-bg-bg2 theme-bc-bd1 font-semibold px-fs-16 uppercase px-mb-0 px-mt-0 px-py-12 px-px-20 flex items-center"><span class="flex-grow">References</span><i class="theme-muted px-fs-12 fas fa-caret-left"></i></a></div></main></aside><aside class="duration-200 absolute px-w-220 px-b-0 px-t-0 px-t-60 px-z-100 px-r-0 rlg-hidden"><div class="px-h-100-0 theme-bg-bg3 flex flex-col"><menu class="px-m-0 px-px-10 px-py-20 px-h-100-40 overflow-auto"><h6 class="theme-muted px-fs-14 px-mb-0 px-mt-0 px-pb-10 uppercase">On this page</h6><nav class="px-fs-14 px-lh-32"><a class="theme-tx0 block" href="#api-config">1. API Config</a><a class="theme-tx0 block" href="#configure-scopes">2. Configure Scopes</a><a class="theme-tx0 block" href="#configure-endpoints">3. Configure Endpoints</a><a class="theme-tx0 block" href="#custom-endpoint">4. Custom Endpoint</a><a class="theme-tx0 block" href="#configure-webhooks">5. Configure Webhooks</a></nav></menu></div></aside><main class="theme-bg-bg0 duration-200 absolute px-b-0 px-t-60 px-l-220 rmd-px-l-0 px-r-220 rlg-px-r-0"><article class="px-h-100-0 overflow-auto px-px-20 px-pb-20 px-fs-15"><h1 class="px-fs-24 font-bold px-pt-40 px-pb-20">Setup API</h1><p class="px-lh-30 px-py-20 block"><strong class="font-bold">Stackpress</strong> API is a configuration that ultimately act as gateways to events. The API follows the 2-legged and 3-legged OAuth 2.0 specifications. It also includes a webhook system that allows you to call external URLs when certain events happen.</p><a id="api-config"></a><h2 class="px-fs-16 font-bold px-pt-40">1. API Config</h2><section><p class="px-lh-30 px-py-20 block">Update the configuration file with the <!-- --> settings using the following as a guide.</p><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><p class="px-lh-30 px-py-20 block">The API config includes the following options.</p><div class="px-w-100-0 overflow-x-auto px-mb-20"><div class="frui-tbl-overflow"><table class="frui-tbl"><thead><tr><th class="frui-tbl-head theme-bg-bg2 text-left">Option<hr style="border-width:0;margin:0;width:200px"/></th><th class="frui-tbl-head theme-bg-bg2 text-left">Notes</th></tr></thead><tbody><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">When API sessions expire. This is used with <span class="inline"><span class="theme-tx1 theme-bg-bg2 inline-block px-px-6 rounded px-lh-24">created</span></span> column in the <span class="inline"><span class="theme-tx1 theme-bg-bg2 inline-block px-px-6 rounded px-lh-24">session</span></span> table.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">Map of scopes to be used with the API following the OAuth specificaitons.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">List of API endpoint configurations.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">List of webhook configurations.</td></tr></tbody><tfoot><tr></tr></tfoot></table></div></div></section><a id="configure-scopes"></a><h2 class="px-fs-16 font-bold px-pt-40">2. Configure Scopes</h2><section><p class="px-lh-30 px-py-20 block">Scopes are used to limit access to certain endpoints and can be toggled per application. Let&#x27;s update the<!-- --> confifguration with the following <!-- --> scope.</p><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><p class="px-lh-30 px-py-20 block">The scope configuration, mainly used for documentation purposes, are as follows.</p><div class="px-w-100-0 overflow-x-auto px-mb-20"><div class="frui-tbl-overflow"><table class="frui-tbl"><thead><tr><th class="frui-tbl-head theme-bg-bg2 text-left">Option<hr style="border-width:0;margin:0;width:200px"/></th><th class="frui-tbl-head theme-bg-bg2 text-left">Notes</th></tr></thead><tbody><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">Readable friendly name of the scope.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">Readable friendly description of the scope.</td></tr></tbody><tfoot><tr></tr></tfoot></table></div></div><div class="frui-alert frui-curved frui-solid frui-thin frui-bd-info frui-tx-info px-lh-28"><i class="inline-block px-mr-5 fas fa-info-circle"></i><strong class="font-bold">NOTE:</strong> <!-- -->Scopes work in conjunction with the <!-- -->. The configuration itself is mainly for documentation purposes.</div></section><a id="configure-endpoints"></a><h2 class="px-fs-16 font-bold px-pt-40">3. Configure Endpoints</h2><section><p class="px-lh-30 px-py-20 block">API endpoints over configuraton act as a gateway that collects the input, calls events and returns its response. Update the<!-- --> confifguration with the following <!-- --> configurations.</p><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><p class="px-lh-30 px-py-20 block">The above configuration allows for searching profiles, accessing a profile, and session. Searching profiles is open for anyone to use, while accessing a profile, and session require tokens. In order to test, the client tokens can be acquired through the following command.</p><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="frui-alert frui-curved frui-solid frui-thin frui-bd-info frui-tx-info px-lh-28"><i class="inline-block px-mr-5 fas fa-info-circle"></i><strong class="font-bold">NOTE:</strong> <!-- -->If you got an empty result, see <a href="/docs/toolkit/setup/3-database-engine#populate-database" class="theme-info underline ">Populating database</a>.</div><p class="px-lh-30 px-py-20 block">Each endpoint configuration requires the following parameters.</p><div class="px-w-100-0 overflow-x-auto px-mb-20"><div class="frui-tbl-overflow"><table class="frui-tbl"><thead><tr><th class="frui-tbl-head theme-bg-bg2 text-left">Option<hr style="border-width:0;margin:0;width:200px"/></th><th class="frui-tbl-head theme-bg-bg2 text-left">Notes</th></tr></thead><tbody><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">The HTTP method to listen to.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">The route pattern to listen to.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left"><ul class="px-lh-30"><li>• <!-- --> - An open endpoint that does not require any tokens.</li><li>• <!-- --> - An endpoint that requires a client token for <strong class="font-semibold">GET</strong> endpoints and a client token/secret for anything else. <em class="font-italic">(2-legged)</em></li><li>• <!-- --> - An endpoint that requires a session for <strong class="font-semibold">GET</strong> endpoints and a token/secret for anything else. Auto populates the <!-- --> in the request data based on the session. <em class="font-italic">(3-legged)</em></li></ul></td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">A list of scope names that can access this endpoint.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">The name of the event to emit when the endpoint is requested.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">An object of static data that will add to and override the input keys <em class="font-italic">(if they exist)</em>.</td></tr></tbody><tfoot><tr></tr></tfoot></table></div></div></section><a id="custom-endpoint"></a><h2 class="px-fs-16 font-bold px-pt-40">4. Custom Endpoint</h2><section><p class="px-lh-30 px-py-20 block">The last endpoint in the section above configuration calls an event called <!-- -->. Let&#x27;s create a custom event that will return a hello message. The event will be called when the endpoint is called.</p><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><div class="frui-alert frui-curved frui-solid frui-thin frui-bd-info frui-tx-info px-lh-28"><i class="inline-block px-mr-5 fas fa-info-circle"></i><strong class="font-bold">NOTE:</strong> <!-- -->Make sure to add the plugin to the <!-- --> list in the <!-- --> file.</div><p class="px-lh-30 px-py-20 block">The above code is a plugin file that listens to the<!-- --> event. It gets the <!-- --> from the request data and calls the <!-- --> event to get the profile. If the profile is found, it returns a hello message with the name of the profile. If not, it returns an error message.</p><div class="frui-alert frui-curved frui-solid frui-thin frui-bd-info frui-tx-info px-lh-28"><i class="inline-block px-mr-5 fas fa-info-circle"></i><strong class="font-bold">NOTE:</strong> <!-- -->In order to test this, you need to populate the session table first. You can also use the command line to populate using the <!-- --> or database <!-- --> event.</div></section><a id="configure-webhooks"></a><h2 class="px-fs-16 font-bold px-pt-40">5. Configure Webhooks</h2><section><p class="px-lh-30 px-py-20 block">Webhooks are automated notifications sent from one application to another when a specific event occurs, like a new order, a user signup, or a payment transaction. They act as a lightweight, event-driven communication method, similar to reverse APIs. Instead of constantly polling for updates, the receiving application gets notified instantly when something happens in real-time.</p><div class="bg-black text-white px-mb-20 px-fs-13" style="position:relative"><div style="text-align:right;padding:10px 10px 0 0;color:inherit;cursor:pointer;white-space:nowrap"><span>❐</span> Copy</div></div><p class="px-lh-30 px-py-20 block">Each webhook configuration requires the following parameters.</p><div class="px-w-100-0 overflow-x-auto px-mb-20"><div class="frui-tbl-overflow"><table class="frui-tbl"><thead><tr><th class="frui-tbl-head theme-bg-bg2 text-left">Option<hr style="border-width:0;margin:0;width:200px"/></th><th class="frui-tbl-head theme-bg-bg2 text-left">Notes</th></tr></thead><tbody><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">The event to listen to.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">The external URL to call when the event is triggered.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">The HTTP method to use when calling the URL.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap theme-bg-bg1 text-left"></td><td valign="top" class="frui-tbl-col theme-bg-bg1 text-left">Checks the results of the event against the validity object. If the results are not valid, the webhook will not be called. The validity object is a map of keys to values. The keys are the names of the columns in the results object. The values are the values to check against.</td></tr><tr class="frui-tbl-row"><td valign="top" class="frui-tbl-col frui-tbl-nowrap text-left"></td><td valign="top" class="frui-tbl-col text-left">Data to include in the results of the event. This adds and overrides the output keys <em class="font-italic">(if they exist)</em>.</td></tr></tbody><tfoot><tr></tr></tfoot></table></div></div><div class="frui-alert frui-curved frui-solid frui-thin frui-bd-warning frui-tx-warning px-lh-24"><i class="inline-block px-mr-5 fas fa-exclamation-triangle"></i><strong class="font-bold">WARNING:</strong> <!-- -->Calling an internal URL may cause an infinite loop if the event listening to is emitted in the internal URL.</div></section><nav class="flex"><a class="theme-primary px-py-40" href="/docs/toolkit/setup-permissions"><i class="fas fa-fw fa-chevron-left"></i>Setup Permissions</a><a class="theme-primary flex-grow text-right px-py-40" href="/docs/toolkit/customize-terminal">Customize Terminal<i class="fas fa-fw fa-chevron-right"></i></a></nav></article></main></div><section class="Toastify" aria-live="polite" aria-atomic="false" aria-relevant="additions text" aria-label="Notifications Alt+T"></section></div>
    <script id="props" type="text/json">{"data":{"view":{"base":"/","props":{}},"brand":{"name":"Stackpress","logo":"/logo.png","icon":"/icon.png","favicon":"/favicon.ico"},"language":{"key":"locale","locale":"en_US","languages":{"en_US":{"label":"EN","translations":{"Sign In":"Signin","Home Page":"Home Page"}},"th_TH":{"label":"TH","translations":{"Sign In":"Signin","Home Page":"Home Pagesss"}}}}},"session":{"id":0,"roles":["GUEST"],"token":"","permits":[{"method":"ALL","route":"/**"}]},"request":{"url":{"hash":"","host":"unknownhost","hostname":"unknownhost","href":"http://unknownhost/","origin":"http://unknownhost","pathname":"/","port":"","protocol":"http:","search":""},"headers":{},"session":{},"method":"GET","mime":"text/plain","data":{"0":"toolkit","1":"setup-api"}},"response":{"code":200,"status":"OK","errors":{},"results":null,"total":0}}</script>
    <script type="module" src="/client/setup-api-xAE9pECk.js"></script>
  </body>
</html>